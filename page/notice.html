<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>ì•Œë¦¼</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <style>
      footer {
        background-color: black;
        color: white;
        padding: 10px 20px;
        text-align: center;
        position: fixed;
        bottom: 0;
        width: 100%;
      }
      .alert {
        cursor: pointer; /* ì•Œë¦¼ ìœ„ì— ë§ˆìš°ìŠ¤ ì»¤ì„œ ì¶”ê°€ */
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
      <div class="container-fluid">
        <a class="navbar-brand" href="/">ì‚¬ì´íŠ¸ì´ë¦„/ë¡œê³ </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#collapsibleNavbar"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="collapsibleNavbar">
          <ul class="navbar-nav">
            <!-- ë¡œê·¸ì¸ì•ˆí•˜ê³  ë³¼ ìˆ˜ ìˆëŠ” í—¤ë” -->
            <li class="nav-item">
              <a class="nav-link" href="">ì±„ìš©ê³µê³ </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="">ììœ ê²Œì‹œíŒ</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="">íšŒì›ê°€ì…</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="">ë¡œê·¸ì¸</a>
            </li>
          </ul>
        </div>
        <div>
          <form class="d-flex">
            <input class="form-control me-2" type="text" placeholder="ğŸ”" />
            <button class="btn btn-primary">ê²€ìƒ‰</button>
          </form>
        </div>
      </div>
    </nav>

    <div class="container mt-5">
      <h4>ì•Œë¦¼</h4>
      <div id="notification-list" class="mt-3">
        <div class="dropdown">
          <button
            class="btn btn-secondary dropdown-toggle"
            type="button"
            id="dropdownMenuButton"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            ì „ì²´ì•Œë¦¼
          </button>
          <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            <li>
              <a class="dropdown-item filter" href="#" data-type="all"
                >ì „ì²´ì•Œë¦¼</a
              >
            </li>
            <li>
              <a class="dropdown-item filter" href="#" data-type="interest"
                >ê´€ì‹¬ê¸°ì—… ì‹ ê·œê³µê³ </a
              >
            </li>
            <li>
              <a class="dropdown-item filter" href="#" data-type="system"
                >ì‹œìŠ¤í…œì•Œë¦¼</a
              >
            </li>
          </ul>
        </div>
        <!-- ì•Œë¦¼ì´ í‘œì‹œë  ì˜ì—­ -->
        <div id="notification-area" class="mt-3"></div>
      </div>
    </div>

    <footer>
      <p>footer</p>
    </footer>

    <script defer>
      // ê°€ì§œ ë°ì´í„° ìƒì„± í•¨ìˆ˜
      function generateFakeData(type) {
        if (type === "interest") {
          return "ê´€ì‹¬ê¸°ì—… ì‹ ê·œê³µê³ ê°€ ìˆìŠµë‹ˆë‹¤.";
        } else if (type === "system") {
          return "ì‹œìŠ¤í…œ ì•Œë¦¼ì…ë‹ˆë‹¤.";
        }
        return "ìƒˆë¡œìš´ ì•Œë¦¼ì´ ë„ì°©í–ˆìŠµë‹ˆë‹¤!";
      }

      // í•„í„°ë§ ê¸°ëŠ¥ ì¶”ê°€
      document.querySelectorAll(".filter").forEach((item) => {
        item.addEventListener("click", (event) => {
          event.preventDefault(); // ë§í¬ì˜ ê¸°ë³¸ ë™ì‘ ë°©ì§€
          const filter = event.target.getAttribute("data-type");
          const notificationArea = document.getElementById("notification-area");
          let notificationMessage = "";
          if (filter === "all") {
            const systemMessage = generateFakeData("system");
            const interestMessage = generateFakeData("interest");
            notificationArea.innerHTML = `<div class="alert alert-primary" role="alert" data-type="system">${systemMessage}</div><div class="alert alert-primary" role="alert" data-type="interest">${interestMessage}</div>`;
          } else {
            notificationMessage = generateFakeData(filter);
            notificationArea.innerHTML = `<div class="alert alert-primary" role="alert" data-type="${filter}">${notificationMessage}</div>`;
          }

          // ì•Œë¦¼ í´ë¦­ ì‹œ í•´ë‹¹ í˜ì´ì§€ë¡œ ì´ë™
          const notificationBoxes = document.querySelectorAll(
            "#notification-area .alert"
          );
          notificationBoxes.forEach((box) => {
            box.addEventListener("click", () => {
              const type = box.getAttribute("data-type");
              if (type === "system") {
                window.location.href =
                  "https://example.com/system-notification-page"; // ì‹œìŠ¤í…œ ì•Œë¦¼ í˜ì´ì§€ URL
              } else if (type === "interest") {
                window.location.href =
                  "https://example.com/interest-notification-page"; // ê´€ì‹¬ê¸°ì—… ì‹ ê·œê³µê³  í˜ì´ì§€ URL
              }
            });
          });
        });
      });

      // í˜ì´ì§€ ë¡œë“œì‹œ ì „ì²´ì•Œë¦¼ ì„ íƒ
      window.onload = () => {
        document.querySelector('[data-type="all"]').click();
      };

      // XMLHttpRequest ê°ì²´ ìƒì„±
      var xhr = new XMLHttpRequest();

      // ì„œë²„ì™€ì˜ í†µì‹  ì„¤ì •
      xhr.open("GET", "https://example.com/api/system-notifications", true); // trueëŠ” ë¹„ë™ê¸° í†µì‹ ì„ ì˜ë¯¸

      // í†µì‹  ì™„ë£Œ í›„ ì‹¤í–‰í•  ì½œë°± í•¨ìˆ˜ ë“±ë¡
      xhr.onreadystatechange = function () {
        // í†µì‹ ì´ ì™„ë£Œë˜ê³  ì‘ë‹µ ìƒíƒœ ì½”ë“œê°€ ì„±ê³µ(200)ì¸ ê²½ìš°
        if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
          // ì‘ë‹µ ë°ì´í„° ì²˜ë¦¬
          var data = JSON.parse(xhr.responseText);
          // ë°›ì•„ì˜¨ ë°ì´í„°ë¥¼ í™œìš©í•˜ì—¬ ì‘ì—… ìˆ˜í–‰
          console.log(data); // ì½˜ì†”ì— ë°ì´í„° ì¶œë ¥ ì˜ˆì‹œ
        }
      };

      // ìš”ì²­ ì „ì†¡
      xhr.send();

      // í•„í„°ë§ ê¸°ëŠ¥ ì¶”ê°€
      document.querySelectorAll(".filter").forEach((item) => {
        item.addEventListener("click", (event) => {
          event.preventDefault(); // ë§í¬ì˜ ê¸°ë³¸ ë™ì‘ ë°©ì§€
          const filter = event.target.getAttribute("data-type");
          const dropdownButton = document.getElementById("dropdownMenuButton");
          const notificationArea = document.getElementById("notification-area");
          let notificationMessage = "";

          // ë“œë¡­ë‹¤ìš´ ë²„íŠ¼ í…ìŠ¤íŠ¸ ë³€ê²½
          dropdownButton.innerText = event.target.innerText;

          if (filter === "all") {
            const systemMessage = generateFakeData("system");
            const interestMessage = generateFakeData("interest");
            notificationArea.innerHTML = `<div class="alert alert-primary" role="alert" data-type="system">${systemMessage}</div><div class="alert alert-primary" role="alert" data-type="interest">${interestMessage}</div>`;
          } else {
            notificationMessage = generateFakeData(filter);
            notificationArea.innerHTML = `<div class="alert alert-primary" role="alert" data-type="${filter}">${notificationMessage}</div>`;
          }

          // ì•Œë¦¼ í´ë¦­ ì‹œ í•´ë‹¹ í˜ì´ì§€ë¡œ ì´ë™
          const notificationBoxes = document.querySelectorAll(
            "#notification-area .alert"
          );
          notificationBoxes.forEach((box) => {
            box.addEventListener("click", () => {
              const type = box.getAttribute("data-type");
              if (type === "system") {
                window.location.href =
                  "https://example.com/system-notification-page"; // ì‹œìŠ¤í…œ ì•Œë¦¼ í˜ì´ì§€ URL
              } else if (type === "interest") {
                window.location.href =
                  "https://example.com/interest-notification-page"; // ê´€ì‹¬ê¸°ì—… ì‹ ê·œê³µê³  í˜ì´ì§€ URL
              }
            });
          });
        });
      });
    </script>
  </body>
</html>
